classDiagram
    class CustomerSupportState {
      +messages[]
      +customer_email
      +customer_first_name
      +customer_last_name
      +customer_shopify_id
      +ticket_category
      +intent_confidence
      +intent_shifted
      +current_agent
      +order_details
      +current_order_id
      +current_order_number
      +subscription_status
      +current_subscription_id
      +input_blocked
      +override_response
      +pii_redacted
      +output_guardrail_passed
      +output_guardrail_issues[]
      +discount_code_created
      +pending_refund_amount
      +order_total
      +flag_escalation_risk
      +flag_health_concern
      +is_handoff
      +handoff_target
      +handoff_count_this_turn
      +reflection_passed
      +reflection_feedback
      +reflection_rule_violated
      +reflection_suggested_fix
      +was_revised
      +is_escalated
      +escalation_payload
      +escalation_reason
      +tool_calls_log[]
      +actions_taken[]
      +agent_reasoning[]
    }
